<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
    <Document>
        <name>20020 Bowl Game Map</name>
        <description><![CDATA[
            <p>This is an unofficial map of the Bowl Game from <i>20020</i>, generated by the <a href="https://github.com/iliana/20020-map">20020 Bowl Game map project</a>. It almost certainly has errors, and we'd love your help fixing them.</p>
            <p>
                <a href="https://www.sbnation.com/secret-base/21410129/20020"><b><i>20020</i></b></a><br>
                Secret Base<br>
                Â© 2020 Vox Media, Inc. All Rights Reserved<br>
                Author, Illustrator, Video Director: Jon Bois<br>
                Editor: Graham MacAree<br>
                Engineer: Frank Bi<br>
                Data: Google, Landsat/Copernicus, LDEO-Columbia, NSF, NOAA, SIO, U.S. Navy, NGA, GEBCO
            </p>
        ]]></description>
        {% if kmz %}
        <Folder>
            <name>Labels</name>
            {% for field in fields %}
            <GroundOverlay>
                <name>{{ field.name }}</name>
                <Icon>
                    <href>files/{{ field.name }}.png</href>
                </Icon>
                <altitude>3500</altitude>
                <altitudeMode>absolute</altitudeMode>
                <LatLonBox>
                    <north>{{ field.label_box.north|degrees }}</north>
                    <south>{{ field.label_box.south|degrees }}</south>
                    <east>{{ field.label_box.east|degrees }}</east>
                    <west>{{ field.label_box.west|degrees }}</west>
                    <rotation>{{ field.label_heading|degrees }}</rotation>
                </LatLonBox>
                <Region>
                    <LatLonAltBox>
                        <north>{{ field.label_region_box.north|degrees }}</north>
                        <south>{{ field.label_region_box.south|degrees }}</south>
                        <east>{{ field.label_region_box.east|degrees }}</east>
                        <west>{{ field.label_region_box.west|degrees }}</west>
                    </LatLonAltBox>
                    <Lod>
                        <minLodPixels>0</minLodPixels>
                        <maxLodPixels>800</maxLodPixels>
                        <minFadeExtent>0</minFadeExtent>
                        <maxFadeExtent>400</maxFadeExtent>
                    </Lod>
                </Region>
            </GroundOverlay>
            {% endfor %}
        </Folder>
        {% endif %}
        <Folder>
            <name>Lines</name>
            {% for field in fields %}
            <Placemark>
                <name>{{ field.name }}</name>
                <LineString>
                    <altitudeMode>clampToGround</altitudeMode>
                    <tessellate>1</tessellate>
                    <coordinates>
                        {% for coordinate in field.line -%}
                        {{ coordinate|kml_coord }}
                        {% endfor %}
                    </coordinates>
                </LineString>
                <Style>
                    <LineStyle>
                        <color>{{ field.color|kml_color(1.0) }}</color>
                        <width>3</width>
                    </LineStyle>
                </Style>
            </Placemark>
            {% endfor %}
        </Folder>
        <Folder>
            <name>Fields</name>
            {% for field in fields %}
            {% if kmz %}
            <Folder>
                <name>{{ field.name }}</name>
                {% for quad in field.field_quads %}
                <GroundOverlay>
                    <Icon>
                        <href>files/{{ field.color|css_color }}.png</href>
                    </Icon>
                    <gx:LatLonQuad>
                        <coordinates>
                            {% for coordinate in quad -%}
                            {{ coordinate|kml_coord }}
                            {% endfor %}
                        </coordinates>
                    </gx:LatLonQuad>
                    <Region>
                        <LatLonAltBox>
                            <north>{{ quad|limit_north }}</north>
                            <south>{{ quad|limit_south }}</south>
                            <east>{{ quad|limit_east }}</east>
                            <west>{{ quad|limit_west }}</west>
                        </LatLonAltBox>
                        <Lod>
                            <minLodPixels>10</minLodPixels>
                        </Lod>
                    </Region>
                </GroundOverlay>
                {% endfor %}
            </Folder>
            {% else %}
            <Placemark>
                <name>{{ field.name }}</name>
                <Polygon>
                    <altitudeMode>clampToGround</altitudeMode>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                {% for coordinate in field.field -%}
                                {{ coordinate|kml_coord }}
                                {% endfor %}
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
                <Style>
                    <PolyStyle>
                        <color>{{ field.color|kml_color(0.7) }}</color>
                    </PolyStyle>
                    <LineStyle>
                        <color>00000000</color>
                    </LineStyle>
                </Style>
            </Placemark>
            {% endif %}
            {% endfor %}
        </Folder>
    </Document>
</kml>
